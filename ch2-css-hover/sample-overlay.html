<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        .block {
            position: relative;
            top: 100px;
            left: 100px;
            display: inline-block;
            width: 300px;
            border-radius: 4px;
            border:1px solid ;
        }

        .block__overlay {
            position: absolute;
            top:0;
            left:0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, .3);
        }

        .block:hover .block__overlay,
        .block.isActive .block__overlay {
            background-color: rgba(100, 200, 0, .5);
        }


    </style>
</head>
<body>
<div class="block">
    <p>
        åœ¨Mouse hoveræ—¶ï¼Œå¦‚æœå¿«é€Ÿç‚¹å‡»é¼ æ ‡ï¼Œå¯èƒ½ä¼šä¸¢å¤±mouse hoverçš„æ•ˆæœã€‚è¿™åœ¨windowsä¸Šçš„æµè§ˆå™¨ç»å¸¸å‡ºç°ï¼Œé€ æˆ'é—ªçƒ'ã€‚è™½ç„¶åœ¨macbookä¸Šå‡ºç°çš„æ—¶å€™å¾ˆå°‘ã€‚
    </p>
    <p>
        è§£å†³æ–¹æ¡ˆï¼šç‚¹å‡»é¼ æ ‡æ—¶ï¼Œæ·»åŠ isActive æ ·å¼ï¼Œå¼ºåˆ¶æ˜¾ç¤º'hover'é‡Œçš„æ ·å¼ã€‚ç­‰mouse outæ—¶ï¼Œå»æ‰isActive classã€‚
    </p>
    <div class="block__overlay">
    </div>

</div>
<script>

    var block = document.getElementsByClassName("block")[0];
    block.addEventListener('mouseout', function (evt) {

        // mouse hoveræ—¶ï¼Œä¸æ–­ğŸ‰ï¸å¿«é€Ÿç‚¹å‡»é¼ æ ‡ï¼Œå¯èƒ½ä¼šè§¦å‘mouseoutäº‹ä»¶ï¼Œå°½ç®¡å¹¶ä¸æ˜¯çœŸæ­£å°†é¼ æ ‡move outäº†ã€‚
        // è¿™é‡Œé€šè¿‡offsetXï¼ŒoffsetYæ¥åˆ¤æ–­é¼ æ ‡çš„ä½ç½®ï¼Œæ˜¯å¦çœŸæ­£è¿˜åœ¨divå†…
        if (evt.offsetX <= 0 || evt.offsetY <= 0 || evt.offsetX >= block.offsetWidth || evt.offsetY >= block.offsetHeight) {
            console.log('Really moved out');
            if (this.classList.contains('isActive')) {
                this.classList.remove('isActive');
            }
        }

        // for testing
//        console.log('offset:', evt.offsetX, evt.offsetY);
//        console.log('xy:', evt.x, evt.y);
//        console.log('page:', evt.pageX, evt.pageY);
//        console.log('fromElement:', evt.fromElement ? evt.fromElement.tagName : null, evt.fromElement ? evt.fromElement.className : null);
//        console.log('toElement:', evt.toElement ? evt.toElement.tagName : null, evt.toElement ? evt.toElement.className : null);
//        console.log('range parent', evt.rangeParent)
    }, false);

    block.addEventListener('click', function (evt) {
        if (!this.classList.contains('isActive')) {
            this.classList.add('isActive');
        }
    }, false);
</script>
</body>
</html>